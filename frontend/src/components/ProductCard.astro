---
type Props = {
  product: {
    id: string;
    name: string;
    description: string;
    price: string;
    imageUrl: string;
    stripeLink: string;
  };
};

const { product } = Astro.props;
const creatorName = "Tiny Crochet"; 
---

<a 
  class="product-card"
  data-product-title={product.name}
  data-creator-name={creatorName}
  data-price={`$${product.price}`}
  href={product.stripeLink} 
  target="_blank"
>
  <article>
    <img 
      src={product.imageUrl} 
      alt={product.name} 
      width="800" 
      height="800" 
      loading="lazy"
      class="custom-image"
    />
    
    <div class="mobile-info">
      <h3 class="mobile-title">{product.name}</h3>
      <span class="mobile-price">${product.price}</span>
    </div>
    
    <span class="sr-only">
      <h3>{product.name}</h3>
      <p>{creatorName}</p>
    </span>
  </article>
</a>

<style>
  .product-card {
    display: flex;
    gap: 0.5rem;
    flex-direction: column;
    align-content: start;
    width: 100%;
    
    /* 核心修复：给卡片加上最大宽度限制，数值你可以根据喜好微调 */
    max-width: 300px; 
    margin: 0 auto; /* 保证卡片在各自的网格里居中对齐 */
    
    cursor: pointer;
    text-decoration: none;
    color: inherit;
  }

  .custom-image {
    width: 100%;
    height: auto;
    
    /* 这里控制图片的比例。1 / 1 是正方形，非常适合钩织玩偶展示。
       如果你想让图片更修长一点，可以改成 3 / 4 */
    aspect-ratio: 1 / 1; 
    
    object-fit: cover;
    background: var(--color-placeholder, #f0f0f0);
    display: block;
    border-radius: 12px; /* 把圆角调大了一点，看起来更精致可爱 */
    
    /* 加一点淡淡的阴影，让卡片有立体感 */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  }

  /* --- 下面的手机端样式保持不变 --- */
  .mobile-info {
    margin-top: 0.75rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    font-size: 0.9rem;
    line-height: 1.2;
    padding: 0 0.25rem; /* 给文字两边留一点呼吸空间 */
  }

  .mobile-title {
    font-weight: 600;
    margin: 0;
    max-width: 70%;
  }

  .mobile-price {
    font-weight: normal;
    opacity: 0.8;
  }

  @media (hover: hover) {
    .mobile-info {
      display: none;
    }
  }
</style>