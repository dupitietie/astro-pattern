---
type Props = {
  product: {
    id: string;
    name: string;
    description: string;
    price: string;
    imageUrl: string;
    stripeLink: string;
  };
};

const { product } = Astro.props;
const creatorName = "Tiny Crochet"; 
---

<a 
  class="product-card"
  data-product-title={product.name}
  data-creator-name={creatorName}
  data-price={`$${product.price}`}
  href={product.stripeLink} 
  target="_blank"
>
  <article>
    <img 
      src={product.imageUrl} 
      alt={product.name} 
      width="800" 
      height="800" 
      loading="lazy"
      class="custom-image"
    />
    
    <div class="mobile-info">
      <h3 class="mobile-title">{product.name}</h3>
      <span class="mobile-price">${product.price}</span>
    </div>
    
    <span class="sr-only">
      <h3>{product.name}</h3>
      <p>{creatorName}</p>
    </span>
  </article>
</a>

<style>
  .product-card {
    display: flex;
    gap: 0.5rem;
    flex-direction: column;
    align-content: start;
    width: 100%;
    cursor: pointer;
    text-decoration: none; /* 去掉链接下划线 */
    color: inherit;        /* 继承字体颜色 */
  }

  .custom-image {
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1.2;
    object-fit: cover;
    background: var(--color-placeholder, #f0f0f0);
    display: block;
    border-radius: 8px; /* 给图片加一点圆角更精致 */
  }

  /* [NEW] 手机端信息的样式 */
  .mobile-info {
    margin-top: 0.75rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    font-size: 0.9rem;
    line-height: 1.2;
  }

  .mobile-title {
    font-weight: 600;
    margin: 0;
    max-width: 70%; /* 防止标题太长挤压价格 */
  }

  .mobile-price {
    font-weight: normal;
    opacity: 0.8;
  }

  /* [KEY MAGIC] 关键魔法：检测设备是否支持“悬停” */
  /* 如果设备有鼠标（hover: hover），就隐藏上面的 .mobile-info */
  /* 这样电脑上依然是纯净图，鼠标放上去才有特效；手机上则直接显示文字 */
  @media (hover: hover) {
    .mobile-info {
      display: none;
    }
  }
</style>